# Windows下使用NGINX转发端口

建议改动nginx端口以防Windows系统的SQLServer服务占用0.0.0.0:80端口。

比如说改到81端口去。

此外就是使用命令行`netstat -aon | findstr :端口名`来检查有没有占用。

启动：`.\nginx.exe`

各种帮助：`.\nginx.exe -h`

在nginx.conf文件里面更改配置，在server字段之下改动nginx的默认启动端口。
```nginx.conf
location / {
    proxy_pass  http://127.0.0.1:8080; # 转发规则
    proxy_set_header Host $proxy_host; # 修改转发请求头，让8080端口的应用可以受到真实的请求
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  }
```
域名转发域名
```text
location / {
    proxy_pass  http://www.baidu.com;
    proxy_set_header Host $proxy_host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  }
```
本地转外地
```.conj
server{
  listen 80;
  server_name 127.0.0.1; # 公网ip
  index  index.php index.html index.htm;

  location / {
    proxy_pass  http://127.0.0.1:8080; # 或 http://www.baidu.com
    proxy_set_header Host $proxy_host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  }
}
```

# 2025年11月7日使用cpolar的本地web UI（免费端）进行操作

目前使用本应用的免费版。

- 目前使用（2025年11月8日配）
  - 本文档之中，localhost:9090对应的网址是：（http或https）
https://2081f93c.r38.cpolar.top
  - 因端口侵占问题，已然调整端口到localhost:3090，对应的网址是：
https://3b58623f.r38.cpolar.top

- 使用（2025年11月7日配）
  - 本文档之中，localhost:9090对应的网址是：（http或https）
https://2081f93c.r38.cpolar.top
  - localhost:3000对应的网址是：
https://22d22915.r38.cpolar.top




----

----

----

文件《分包端口记录与端口分包（到外部）设计.md》已经删除，无实际意义，旧端口与NAT123上的端口全部弃用。
文件内容如下：

# 端口分包

---

- 由于Nexent只支持外部端口，所以目前需要进行端口转发或内网穿透或其他。

1. 基于Windows系统的微机端口转发
- 基于本机端口，输入后查找IPv4的端口。
```cmd
ipconfig
```
- 显示所有端口（在cmd管理员运行中输入代码处理）
```cmd
netsh interface portproxy show all
```
- 新增规则（通过现有的GUI配置也可以）
- 解释：网络连接 端口 portproxy 添加 ipv4到ipv4 监听本地：192.168.3.6:2405 转发到（远程服务器） 112.11.35.130:10010 经由TCP协议
```cmd
netsh interface portproxy add v4tov4 listenport=2405 listenaddress=192.168.3.6 connectport=10010 connectaddress=112.11.36.130 protocol=tcp
```
- 删除规则
- 解释：删除监听本地：192.168.3.6:2405
```cmd
netsh interface portproxy delete v4tov4 listenport=2405 listenaddress=192.168.3.6
```

2. 端口映射
- 基于内网穿透工具进行端口映射，如nat123，Sakura frp或其他工具
- 本次使用nat123客户端配置
---
**端口记录！**
- 账户bhc876，端口http://58101495.nat123.top:39872（2025年11月6日非80转发），其中的子端口是/sse
- 账户bhc876，前端端口http://41101497.nat123.top:39873（2025年11月6日非80转发），有关子端口为：
  - Nexent页面/zh/chat，端口部署端为docker。

---
- **注意**：在Nexent之中，需要点击一下工具以启用工具（卧槽这个他们都不讲的，他妈的气死了）